<!DOCTYPE html>
<html>
<head>
	<script src="local.js"></script>
	<script src="api_key.js"></script>
</head>
<body>
	
	<div id="mup_everywhere_mashup">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
		<script id="config" type="text/javascript" charset="utf-8">
		  var $parameters = {
		    urlname: "techcrunch",
		    width: 200,
		    _height: 350,
		    _name: "Everywhere Mashup",
		    _description: "Shows past meetups and aggregates tagged content from other services."
		  };
		  var $queries = {
		    containers: function() { 
		      return api_call("/ew/containers", {urlname: $parameters.urlname, fields: "member_count"});
		    },
		    events: function() { 
		      return api_call("/ew/events", {status: "past", order: "time", urlname: $parameters.urlname});
		    }
		  };
		</script>
		<script type="text/javascript" charset="utf-8">
			// Set global variables
			var resultCount = 0;

			$.getJSON($queries.containers(), function(data) {
		    $(".MEETUP_EVERYWHERE_WIDGET").width($parameters.width);
		    if (data.status && data.status.match(/^200/) == null) {
		       alert(data.status + ": " + data.details);
		    } else {
		      var container = data.results[0];
					// My code here.
		      $.getJSON($queries.events(), function(data) {
		        if (data.status && data.status.match(/^200/) == null) {
		          alert(data.status + ": " + data.details);
		        } else {
		          resultCount = parseInt(data.meta.total_count);

		          $.each(data.results, function(i, ev) {
		            if (i==0) {
		              // My code here.
		            }
		          });
		        }
		      });
		    }
		  });
		</script>
		<script type="text/javascript" charset="utf-8">

			$(document).ready(function() {
				
			});

		</script>
		<style type="text/css" media="screen">
			#mup_everywhere_mashup {}
		</style>

	</div>
	
</body>
</html>